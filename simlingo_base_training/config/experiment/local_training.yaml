# @package _global_
# 本地训练配置（用于小规模数据集）
defaults:
  - /data_module: carla_no_buckets  # 不使用 bucket 过滤，适合小规模数据集
  - /model/vision_model: llavanext

model:
  lr: 3e-5
  vision_lr: 3e-5
  predict_route_as_wps: True
  speed_wps_mode: '2d'
  language_model:
    variant: tiny
    lora: False
    _target_: simlingo_base_training.models.language_model.llama.Llama
  vision_model:
    downsample_feature_grid_factor: 2

data_module:
  # 修改为你的数据集路径（相对于项目根目录 /local1/mhu/doc_drive_search）
  # 注意：get_original_cwd() 返回 simlingo_base_training 目录，所以需要向上两级
  data_path: ../data/simlingo_dataset/database/simlingo_extracted
  bucket_path: ../data/simlingo_dataset/database/bucketsv2_simlingo
  batch_size: 4  # 根据GPU显存调整（8GB显存建议2，16GB建议4-6）
  num_workers: 4  # 根据CPU核心数调整
  train_partitions: null  # 不使用 bucket 过滤，使用所有数据
  route_as: target_point
  hist_len: 1
  cut_bottom_quarter: False
  use_global_img: False
  
  img_shift_augmentation: True
  img_shift_augmentation_prob: 0.5
  image_enhancing: True

max_epochs: 30
val_every_n_epochs: 10
seed: 42
gpus: 1  # 单GPU训练
name: local_training
enable_wandb: true  # 启用 wandb

hydra:
  run:
    dir: outputs/${wandb_name}_${name}




